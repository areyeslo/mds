[2020-07-10 21:29:04,980: INFO/MainProcess] Connected to redis://:**@redis:6379//
[2020-07-10 21:29:04,986: INFO/MainProcess] mingle: searching for neighbors
[2020-07-10 21:29:06,001: INFO/MainProcess] mingle: all alone
[2020-07-10 21:29:06,011: INFO/MainProcess] celery@95c8376a48e2 ready.
[2020-07-10 21:31:14,141: INFO/MainProcess] Received task: app.docman.resources.admin.transfer_docs[730b6485-666d-4c41-8059-0cf67952f518]  
[2020-07-10 21:31:14,198: ERROR/ForkPoolWorker-7] Task app.docman.resources.admin.transfer_docs[730b6485-666d-4c41-8059-0cf67952f518] raised unexpected: TypeError("transfer_docs() missing 2 required positional arguments: 'docs' and 'chunk_index'",)
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/celery/app/trace.py", line 412, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/celery/app/trace.py", line 704, in __protected_call__
    return self.run(*args, **kwargs)
TypeError: transfer_docs() missing 2 required positional arguments: 'docs' and 'chunk_index'
[2020-07-10 21:31:34,759: INFO/MainProcess] Connected to redis://:**@redis:6379//
[2020-07-10 21:31:34,766: INFO/MainProcess] mingle: searching for neighbors
[2020-07-10 21:31:35,779: INFO/MainProcess] mingle: all alone
[2020-07-10 21:31:35,787: INFO/MainProcess] celery@95c8376a48e2 ready.
[2020-07-10 21:31:37,430: INFO/MainProcess] Received task: app.docman.resources.admin.transfer_docs[6c3447be-a487-4178-8141-20920efbc99d]  
[2020-07-10 21:31:37,465: ERROR/ForkPoolWorker-7] Task app.docman.resources.admin.transfer_docs[6c3447be-a487-4178-8141-20920efbc99d] raised unexpected: RuntimeError('No application found. Either work inside a view function or push an application context. See http://flask-sqlalchemy.pocoo.org/contexts/.',)
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/sqlalchemy/util/_collections.py", line 1010, in __call__
    return self.registry[key]
KeyError: 140688992536384

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/celery/app/trace.py", line 412, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/celery/app/trace.py", line 704, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/app/docman/resources/admin.py", line 50, in transfer_docs
    docs = Document.query.filter_by(object_store_path=None).all()
  File "/usr/local/lib/python3.6/site-packages/flask_sqlalchemy/__init__.py", line 519, in __get__
    return type.query_class(mapper, session=self.sa.session())
  File "/usr/local/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 78, in __call__
    return self.registry()
  File "/usr/local/lib/python3.6/site-packages/sqlalchemy/util/_collections.py", line 1012, in __call__
    return self.registry.setdefault(key, self.createfunc())
  File "/usr/local/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 3213, in __call__
    return self.class_(**local_kw)
  File "/usr/local/lib/python3.6/site-packages/flask_sqlalchemy/__init__.py", line 136, in __init__
    self.app = app = db.get_app()
  File "/usr/local/lib/python3.6/site-packages/flask_sqlalchemy/__init__.py", line 982, in get_app
    'No application found. Either work inside a view function or push'
RuntimeError: No application found. Either work inside a view function or push an application context. See http://flask-sqlalchemy.pocoo.org/contexts/.
[2020-07-10 21:35:08,068: INFO/MainProcess] Connected to redis://:**@redis:6379//
[2020-07-10 21:35:08,076: INFO/MainProcess] mingle: searching for neighbors
[2020-07-10 21:35:09,092: INFO/MainProcess] mingle: all alone
[2020-07-10 21:35:09,100: INFO/MainProcess] celery@95c8376a48e2 ready.
[2020-07-10 21:35:40,949: INFO/MainProcess] Connected to redis://:**@redis:6379//
[2020-07-10 21:35:40,958: INFO/MainProcess] mingle: searching for neighbors
[2020-07-10 21:35:41,972: INFO/MainProcess] mingle: all alone
[2020-07-10 21:35:41,981: INFO/MainProcess] celery@95c8376a48e2 ready.
[2020-07-10 21:35:42,439: ERROR/MainProcess] Received unregistered task of type 'app.docman.resources.admin.transfer_docs'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
http://docs.celeryq.org/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/celery/worker/consumer/consumer.py", line 562, in on_task_received
    strategy = strategies[type_]
KeyError: 'app.docman.resources.admin.transfer_docs'
[2020-07-10 21:39:38,044: INFO/MainProcess] Connected to redis://:**@redis:6379//
[2020-07-10 21:39:38,050: INFO/MainProcess] mingle: searching for neighbors
[2020-07-10 21:39:39,063: INFO/MainProcess] mingle: all alone
[2020-07-10 21:39:39,071: INFO/MainProcess] celery@95c8376a48e2 ready.
[2020-07-10 21:40:24,600: ERROR/MainProcess] Received unregistered task of type 'app.docman.resources.admin.transfer_docs'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
http://docs.celeryq.org/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/celery/worker/consumer/consumer.py", line 562, in on_task_received
    strategy = strategies[type_]
KeyError: 'app.docman.resources.admin.transfer_docs'
